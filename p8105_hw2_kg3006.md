p8105_hw2_kg3006
================
Kevin Guzman
2025-09-28

## Load Libraries

These are all the libraries for this homework assigment

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.1     ✔ stringr   1.5.2
    ## ✔ ggplot2   4.0.0     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
```

## Probelm 1

Problem 1 uses the FiveThirtyEight data which we will need to upload the
pols-month.csv, unempoloyment.csv, and snp.csv. Goal is to merge into a
single dataframe using year and month as keys. \###Cleaning
pols-month.csv \#### Load the data

``` r
pols_month <- 
  read_csv("./fivethirtyeight_datasets/pols-month.csv")
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Has 9 variables, mon is date, others are all numeric.

#### Separating Date into year, month, date

Current structure is “YYYY-MM-DD”, we will separate into year, month,
day. Also will remove the day variable in this step

``` r
pols_month <- 
  pols_month %>%
  separate(col = mon,
           into = c("year", "month", "day"),
           sep = "-") %>% 
  select(-day)
```

#### Changing month from numeric

replacing variables in month from numeric value 1-12, to it’s
corresponding month.

``` r
pols_month <- 
  pols_month %>%
  mutate(month = case_when(
    month == "01" ~ "January",
    month == "02" ~ "February",
    month == "03" ~ "March",
    month == "04" ~ "April",
    month == "05" ~ "May",
    month == "06" ~ "June",
    month == "07" ~ "July",
    month == "08" ~ "August",
    month == "09" ~ "September",
    month == "10" ~ "October",
    month == "11" ~ "November",
    month == "12" ~ "December"
  ))
```

#### Create a “president” variable

Creating a new variable “president” based on prez_gop if 1==gop, and
prez_dem if 1=dem. and removing prez_dem and prez_gop.

``` r
pols_month <- 
  pols_month %>%
  mutate(president = case_when(
    prez_gop == 1 ~ "gop",
    prez_dem == 1 ~ "dem"
  )) %>%
  select(-prez_gop, -prez_dem)
```

### Cleaning snp.csv

#### Load the data

``` r
snp <- 
  read_csv("./fivethirtyeight_datasets/snp.csv")
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

There are two variables here. The first is the date which needs to be
cleaned and go to the front, and the second is the close, which is the
closing value fo the S&P 500 index.

#### Separating Date into year, month, date

Current structure is “M/D/YY”, we will seperate into year, month, day
and remove day. Also making year come first then month

``` r
snp <- 
  snp %>%
  separate(col = date,
           into = c("month", "day", "year"),
           sep = "/") %>%
  select(-day) %>% 
  select(year, month, everything()) 
```

##### Chaning month from numeric to month name

``` r
snp <- 
  snp %>%
  mutate(month = case_when(
    month == "1" ~ "January",
    month == "2" ~ "February",
    month == "3" ~ "March",
    month == "4" ~ "April",
    month == "5" ~ "May",
    month == "6" ~ "June",
    month == "7" ~ "July",
    month == "8" ~ "August",
    month == "9" ~ "September",
    month == "10" ~ "October",
    month == "11" ~ "November",
    month == "12" ~ "December"
  ))
```

##### Year needs to match prior

Year here has 2 digits, need to make it 4 digits to match prior
dataframes by adding 19 to characters 50 - 99 and 20 to characters 00 -
25.

``` r
snp <- 
  snp %>%
  mutate(year = case_when(
    as.integer(year) >= 50 ~ paste0("19", year),
    as.integer(year) <= 25 ~ paste0("20", year)
  ))
```

### Cleaning unemployment.csv

#### Load the data

``` r
unemployment <-
  read_csv("./fivethirtyeight_datasets/unemployment.csv")
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

There are 13 columns, the first is Year which is numeric and needs to
change to character

#### Changing Year

Changing from numeric to character

``` r
unemployment <-
  unemployment %>%
  mutate(Year = as.character(Year))
```

It also needs to be renamed from Year to year to match other dataframes

``` r
unemployment <-
  unemployment %>%
  rename(year = Year)
```

### Changing month

Month data representes the percent of unepolyment in each month. This
will need to be pivoted from wide to long format for month

``` r
unemployment <-
  unemployment %>%
  pivot_longer(cols = Jan:Dec,
               names_to = "month",
               values_to = "unemployment_rate")
```

I will also need to chagne month from shorten 3 word name to full name

``` r
unemployment <-
  unemployment %>%
  mutate(month = case_when(
    month == "Jan" ~ "January",
    month == "Feb" ~ "February",
    month == "Mar" ~ "March",
    month == "Apr" ~ "April",
    month == "May" ~ "May",
    month == "Jun" ~ "June",
    month == "Jul" ~ "July",
    month == "Aug" ~ "August",
    month == "Sep" ~ "September",
    month == "Oct" ~ "October",
    month == "Nov" ~ "November",
    month == "Dec" ~ "December"
  ))
```

### Merging all three dataframes

Now that all three dataframes are cleaned, we can merge them using year
and month as keys with left_join

``` r
merged_data <-
  pols_month %>%
  left_join(snp, by = c("year", "month")) %>%
  left_join(unemployment, by = c("year", "month"))
```

### Description of datasets

This combined dataset contines information gathered from the
FiveThirtyEight data. Each dataset is arranged into year of month of the
data. The pols_month dataset was informative in the party affiliation of
the president in power during each year-month time interval. It also
contains infomration on the number of senators, representitives, and
governers during this time period. The snp dataset contains each
year-month closing value of the S&P 500 index, and finally the
unempolymenbt dataset contains the unemployment rate for each year-month
time interval.

The **dimentions of the dataset** are 822 observations and 11
variables/columns.

**Key variables include**:  
- year  
- month  
- president  
- close (S&P 500 closing value)  
- unemployment_rate

The dataset **starts on 1947 and ends in 2015**.

## Problem 2

In this problem we use the excel file 2024_09_Trash_Wheel_Data.xlsx
which as 3 sheets of importance “Mr. Trash Wheel”, “Professor Trash
Wheel”, and “Gwynnda Trash Wheel”. We will clean each sheet seperately
and then merge.

### Loading Mr. Trashweel data

Specification include cleaning column names, removing columns that are
missing, removing rows without dumpsters, adding dataset for merging,
reorganizing, and making sport balls into integers.

In addition there seems to be a problem in the datasets formating.  
- year - all should be character  
-

``` r
mr_trash_wheel <- 
  read_excel("./Trash/2024_09_Trash_Wheel_Data.xlsx",
                     sheet = "Mr. Trash Wheel") %>% 
  select(-...15, -...16) %>% 
  janitor::clean_names() %>% 
  mutate (dataset="mr_trash_wheel") %>% 
  select(year, month, dataset, everything()) %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(sports_balls = as.integer(round(sports_balls)))
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

### Loading Professor Trash Wheel data

Column names here need to be cleaned, there are no additional variables
that are added too so we don’t have to remove those columns. There is
also no sports balls, so we don’t have to create that step

``` r
professor_trash_wheel <-
  read_excel("./Trash/2024_09_Trash_Wheel_Data.xlsx",
                     sheet = "Professor Trash Wheel") %>% 
  janitor::clean_names() %>% 
  mutate (dataset="professor_trash_wheel") %>%
  select(year, month, dataset, everything()) %>%
  filter(!is.na(dumpster)) %>% 
  mutate(year = as.character(year))
```

### Loading Gwynnda Trash Wheel data

Similar here, no additional columns created and there is no sports ball
variable to mutate.

``` r
gwynnda_trash_wheel <-
  read_excel("./Trash/2024_09_Trash_Wheel_Data.xlsx",
                     sheet = "Gwynnda Trash Wheel") %>% 
  janitor::clean_names() %>% 
  mutate (dataset="gwynnda_trash_wheel") %>%
  select(year, month, dataset, everything()) %>%
  filter(!is.na(dumpster)) %>% 
  mutate(year = as.character(year))
```

All data has month, year dumpster. We will go through each one and then
merge by month and year.

### Join rows for all datasets

Joining all datasets by rows

``` r
trash_wheel_data <-
  bind_rows(mr_trash_wheel,
            professor_trash_wheel,
            gwynnda_trash_wheel)
```

### Description of dataset

This combined dataset contains information on the amount of trash
collected by three different trash wheels in Baltimore. There are a
**total** of 1033 observations and 15 variables/columns. The key
variables include:  
- year  
- month  
- dataset (which trash wheel)  
- dumpster (number of dumpsters collected)  
- plastic_bottles  
- plastic_bags  
- sports_balls (only for Mr. Trash Wheel)

The dataset starts on 2014 and ends in 2024. There are 651 observations
from Mr. Trash Wheel, 119 observations from Professor Trash Wheel, and
263 observations from Gwynnda Trash Wheel.

The **total weight of trash collected by professor trash wheel** was
4.9348^{5} pounds. In addition, the **total number of cigarettes butts
collected by Gwynnda in June of 2022** was 1.812^{4} butts.

## Problem 3 Zillow

We will be using zillow data here

### Loading the data

Uploading the data and cleaning the names with janitor

``` r
zillow_zip <-
  read_csv("./Zillow/Zip Codes.csv") %>% 
  janitor::clean_names()
```

    ## Rows: 322 Columns: 7
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (4): County, County Code, File Date, Neighborhood
    ## dbl (3): State FIPS, County FIPS, ZipCode
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

This dataset contains 7 variables and 322 observations.

``` r
zori <-
  read_csv("./Zillow/Zip_zori_uc_sfrcondomfr_sm_month_NYC.csv") %>% 
  janitor::clean_names()
```

    ## Rows: 149 Columns: 125
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr   (6): RegionType, StateName, State, City, Metro, CountyName
    ## dbl (119): RegionID, SizeRank, RegionName, 2015-01-31, 2015-02-28, 2015-03-3...
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

149 observations with 125 variables. Most variables are dates with long
format

### Stating to Clean

We are specifically analyzing NYC between Janurary 2015 and August 2024.

#### Cleaning zillow_zip

##### County

First we look at data

``` r
table(zillow_zip$county) # 149 New York, 48 Kings, 30 Bronx, Queens 81, Richmond 14 
```

    ## 
    ##    Bronx    Kings New York   Queens Richmond 
    ##       30       48      149       81       14

``` r
any(is.na(zillow_zip$county)) # No missing values
```

    ## [1] FALSE

There are no missing data.

##### State FIPS

Looking at the data: Will change state to New York if 36

``` r
table(zillow_zip$state_fips) # not a useful data and so will remove 
```

    ## 
    ##  36 
    ## 322

``` r
any(is.na(zillow_zip$state_fips)) # No missing values
```

    ## [1] FALSE

``` r
zillow_zip <- zillow_zip %>% 
  mutate(state = case_when(
     state_fips == 36 ~ "New York",
     TRUE ~ as.character(state_fips)
  )) %>% 
    select(-state_fips)
```

There are no missing values and all are New York

##### County_code

Looking at county code

``` r
table(zillow_zip$county_code) # not a useful data and so will remove
```

    ## 
    ## 005 047 061 081 085 
    ##  30  48 149  81  14

``` r
any(is.na(zillow_zip$county_code)) # No missing values
```

    ## [1] FALSE

``` r
table(zillow_zip$county_code, zillow_zip$county) #  all county codes match with one county. 
```

    ##      
    ##       Bronx Kings New York Queens Richmond
    ##   005    30     0        0      0        0
    ##   047     0    48        0      0        0
    ##   061     0     0      149      0        0
    ##   081     0     0        0     81        0
    ##   085     0     0        0      0       14

All counties match up wtih the county code, this is a redundent
variables so I will remove it.

``` r
zillow_zip <- zillow_zip %>%
  select(-county_code)
```

##### County_fips

Looking at county fips

``` r
table(zillow_zip$county_fips) # not a useful data and so will remove
```

    ## 
    ## 36005 36047 36061 36081 36085 
    ##    30    48   149    81    14

``` r
table(zillow_zip$county_fips, zillow_zip$county) # all county fips match with one county. 
```

    ##        
    ##         Bronx Kings New York Queens Richmond
    ##   36005    30     0        0      0        0
    ##   36047     0    48        0      0        0
    ##   36061     0     0      149      0        0
    ##   36081     0     0        0     81        0
    ##   36085     0     0        0      0       14

All counties match up wtih the county fips, this is a redundent
variables so I will remove it.

``` r
zillow_zip <- zillow_zip %>%
  select(-county_fips)
```

##### Zip_code

Looking at zip code

``` r
table(zillow_zip$zip_code) # zip codes make sense 
```

    ## 
    ## 10001 10002 10003 10004 10005 10006 10007 10008 10009 10010 10011 10012 10013 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10014 10016 10017 10018 10019 10020 10021 10022 10023 10024 10025 10026 10027 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10028 10029 10030 10031 10032 10033 10034 10035 10036 10037 10038 10039 10040 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10041 10043 10044 10045 10047 10048 10055 10065 10069 10072 10075 10080 10081 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10082 10087 10101 10102 10103 10104 10105 10106 10107 10108 10109 10110 10111 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10112 10113 10114 10115 10116 10117 10118 10119 10120 10121 10122 10123 10124 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10125 10126 10128 10129 10130 10131 10132 10133 10138 10149 10150 10151 10152 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10153 10154 10155 10156 10157 10158 10159 10160 10161 10162 10163 10164 10165 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10166 10167 10168 10169 10170 10171 10172 10173 10174 10175 10176 10177 10178 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10179 10185 10197 10199 10213 10242 10249 10256 10259 10260 10261 10265 10268 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10269 10270 10271 10272 10273 10274 10275 10276 10277 10278 10279 10280 10281 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10282 10285 10286 10292 10301 10302 10303 10304 10305 10306 10307 10308 10309 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10310 10311 10312 10313 10314 10451 10452 10453 10454 10455 10456 10457 10458 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10459 10460 10461 10462 10463 10464 10465 10466 10467 10468 10469 10470 10471 
    ##     1     1     1     1     2     1     1     1     1     1     1     1     1 
    ## 10472 10473 10474 10475 10499 10550 10704 10705 10803 11001 11004 11005 11040 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11096 11101 11102 11103 11104 11105 11106 11109 11201 11202 11203 11204 11205 
    ##     1     1     1     1     1     1     1     1     2     1     1     1     1 
    ## 11206 11207 11208 11209 11210 11211 11212 11213 11214 11215 11216 11217 11218 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11219 11220 11221 11222 11223 11224 11225 11226 11228 11229 11230 11231 11232 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11233 11234 11235 11236 11237 11238 11239 11241 11242 11243 11245 11247 11249 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11251 11252 11256 11351 11352 11354 11355 11356 11357 11358 11359 11360 11361 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11362 11363 11364 11365 11366 11367 11368 11369 11370 11371 11372 11373 11374 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11375 11377 11378 11379 11380 11381 11385 11386 11405 11411 11412 11413 11414 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11415 11416 11417 11418 11419 11420 11421 11422 11423 11424 11425 11426 11427 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11428 11429 11430 11431 11432 11433 11434 11435 11436 11439 11451 11499 11559 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11580 11690 11691 11692 11693 11694 11695 11697 
    ##     1     1     1     1     1     1     1     1

``` r
any(is.na(zillow_zip$zip_code)) # No missing values
```

    ## [1] FALSE

There are many zip codes. They all make sense from 10001-11697

##### File_date

Looking at file date. All the file date is 07/25/07, this is also not
useful, so will remove it.

``` r
table(zillow_zip$file_date) # all 7/25/07, will remove 
```

    ## 
    ## 7/25/07 
    ##     322

``` r
zillow_zip <- zillow_zip %>%
  select(-file_date)
```

##### neighbrohood

Looking at neighborhood

``` r
any(is.na(zillow_zip$neighborhood)) # There are missing values 
```

    ## [1] TRUE

Some missing variables mapping out which neighborhoods are in each
county

``` r
table(zillow_zip$neighborhood, zillow_zip$county) # there are some neighborhoods with two different countires.
```

    ##                                
    ##                                 Bronx Kings New York Queens Richmond
    ##   Borough Park                      0     4        0      0        0
    ##   Bronx Park and Fordham            3     0        0      0        0
    ##   Bushwick and Williamsburg         0     3        0      0        0
    ##   Canarsie and Flatlands            0     3        0      0        0
    ##   Central Bronx                     3     0        0      0        0
    ##   Central Brooklyn                  0     5        0      0        0
    ##   Central Harlem                    0     0        5      0        0
    ##   Central Queens                    0     0        0      3        0
    ##   Chelsea and Clinton               0     0        6      0        0
    ##   East Harlem                       0     0        2      0        0
    ##   East New York and New Lots        0     2        0      0        0
    ##   Flatbush                          0     4        0      0        0
    ##   Gramercy Park and Murray Hill     0     0        4      0        0
    ##   Greenpoint                        0     2        0      0        0
    ##   Greenwich Village and Soho        0     0        3      0        0
    ##   High Bridge and Morrisania        3     0        0      0        0
    ##   Hunts Point and Mott Haven        4     0        0      0        0
    ##   Inwood and Washington Heights     0     0        5      0        0
    ##   Jamaica                           0     0        0      7        0
    ##   Kingsbridge and Riverdale         2     0        1      0        0
    ##   Lower East Side                   0     0        3      0        0
    ##   Lower Manhattan                   0     0        6      0        0
    ##   Mid-Island                        0     0        0      0        1
    ##   North Queens                      0     0        0      7        0
    ##   Northeast Bronx                   4     0        0      0        0
    ##   Northeast Queens                  0     0        0      4        0
    ##   Northwest Brooklyn                0     5        1      0        0
    ##   Northwest Queens                  0     0        0      6        0
    ##   Port Richmond                     0     0        0      0        3
    ##   Rockaways                         0     1        0      5        0
    ##   South Shore                       0     0        0      0        5
    ##   Southeast Bronx                   6     0        0      0        0
    ##   Southeast Queens                  0     0        0      9        0
    ##   Southern Brooklyn                 0     4        0      0        0
    ##   Southwest Brooklyn                0     3        0      0        0
    ##   Southwest Queens                  0     0        0      8        0
    ##   Stapleton and St. George          0     0        0      0        3
    ##   Sunset Park                       0     2        0      0        0
    ##   Upper East Side                   0     0        6      0        0
    ##   Upper West Side                   0     0        3      0        0
    ##   West Central Queens               0     0        0      4        0
    ##   West Queens                       0     0        0      7        0

``` r
#Finding neighborhoods with more than one county
zillow_zip %>%
  group_by(neighborhood) %>%
  summarise(n_counties = n_distinct(county)) %>%
  filter(n_counties > 1)
```

    ## # A tibble: 4 × 2
    ##   neighborhood              n_counties
    ##   <chr>                          <int>
    ## 1 Kingsbridge and Riverdale          2
    ## 2 Northwest Brooklyn                 2
    ## 3 Rockaways                          2
    ## 4 <NA>                               5

``` r
# there are 5 missing, will leave as is.
#Kingsbridge and riverdale is in the bronx 
#Nortwhest Brooklyn is in kings 
#Rockaways should also be in queens not 
```

##### looking at zipcodes fore each neighborhood with multiple counties

``` r
zillow_zip %>%
  filter(neighborhood %in% c("Kingsbridge and Riverdale", "Northwest Brooklyn", "Rockaways")) %>%
  select(neighborhood, county, zip_code)
```

    ## # A tibble: 15 × 3
    ##    neighborhood              county   zip_code
    ##    <chr>                     <chr>       <dbl>
    ##  1 Kingsbridge and Riverdale Bronx       10463
    ##  2 Kingsbridge and Riverdale Bronx       10471
    ##  3 Northwest Brooklyn        Kings       11201
    ##  4 Northwest Brooklyn        Kings       11205
    ##  5 Northwest Brooklyn        Kings       11215
    ##  6 Northwest Brooklyn        Kings       11217
    ##  7 Northwest Brooklyn        Kings       11231
    ##  8 Rockaways                 Kings       11693
    ##  9 Kingsbridge and Riverdale New York    10463
    ## 10 Northwest Brooklyn        New York    11201
    ## 11 Rockaways                 Queens      11691
    ## 12 Rockaways                 Queens      11692
    ## 13 Rockaways                 Queens      11694
    ## 14 Rockaways                 Queens      11695
    ## 15 Rockaways                 Queens      11697

``` r
#If 11201 then should be Kings for county 
#If 10463 then should be Bronx for county
#If 11693 then should be Queens for county
zillow_zip <- zillow_zip %>%
  mutate(county = case_when(
    neighborhood == "Kingsbridge and Riverdale" & zip_code == 10463 ~ "Bronx",
    neighborhood == "Northwest Brooklyn" & zip_code == 11201 ~ "Kings",
    neighborhood == "Rockaways" & zip_code == 11693 ~ "Queens",
    TRUE ~ county
  )) %>% 
  select(zip_code, state, county, everything())
```

\####Cleaning zori \##### zip_code (region_name) Looking at region_name
and region_type

``` r
#Region type
table(zori$region_type) # all zip codes, will remove eventually 
```

    ## 
    ## zip 
    ## 149

``` r
any(is.na(zori$region_name)) # No missing values
```

    ## [1] FALSE

``` r
#Region name - already as numeric, however will need to rename for consistency 
table(zori$region_name) # All zipcode are within a range that makes sense (10001-11697)
```

    ## 
    ## 10001 10002 10003 10004 10005 10006 10007 10009 10010 10011 10012 10013 10014 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10016 10017 10018 10019 10021 10022 10023 10024 10025 10026 10027 10028 10029 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10030 10031 10032 10033 10034 10035 10036 10037 10038 10039 10040 10044 10065 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10069 10075 10128 10162 10280 10282 10301 10303 10304 10305 10306 10308 10312 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10314 10451 10452 10453 10454 10455 10456 10457 10458 10459 10460 10461 10462 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 10463 10465 10466 10467 10468 10469 10470 10471 10472 10473 11101 11102 11103 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11104 11105 11106 11109 11201 11203 11204 11205 11206 11207 11208 11209 11210 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11211 11212 11213 11214 11215 11216 11217 11218 11219 11220 11221 11222 11223 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11225 11226 11228 11229 11230 11231 11232 11233 11234 11235 11236 11237 11238 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11249 11354 11355 11356 11357 11358 11360 11361 11364 11365 11366 11367 11368 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11369 11370 11372 11373 11374 11375 11377 11378 11379 11385 11415 11418 11426 
    ##     1     1     1     1     1     1     1     1     1     1     1     1     1 
    ## 11432 11434 11435 11691 11692 11693 
    ##     1     1     1     1     1     1

``` r
zori <- zori %>%
  rename(zip_code = region_name) %>%
  select(-region_type)
```

All zipcode are within a range that makes sense (10001-11697). Needed to
rename to zip_code from region_name.

We will also look if all zip_codes in zori are present in zillow_zip.

``` r
all(zori$zip_code %in% zillow_zip$zip_code) # TRUE, all are present 
```

    ## [1] TRUE

Since all are present, we do not need state name, county name, or
region, city, or metro and will remove all of them.

##### Removing unnecessary variables about location

``` r
zori <- zori %>%
  select(zip_code, size_rank, everything()) %>% 
  select(-(region_id:county_name))
```

##### Looking at size_rank

Looking for missing

``` r
#Missing
any(is.na(zori$size_rank)) # No missing values
```

    ## [1] FALSE

##### Dealing with dates

This data is the ZORI data which is a measure of typical observed rental
market engagement. It is arrange into columns by date. We should piviot
it so that it instead we will have two rows, one for the date and the
other for the ZORI. Date should also be changed to mm/dd/yyyy format.

``` r
zori <- zori %>%
  pivot_longer(cols = starts_with("x"),
               names_to = "date",
               values_to = "zori") %>%
  mutate(date = str_remove(date, "x")) %>%
  mutate(date = as.Date(date, format="%Y_%m_%d"))
```
